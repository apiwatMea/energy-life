<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>‡∏´‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô ‚Ä¢ ENERGY LIFE</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"/>
</head>
<body class="bg">
<div class="shell">
  <header class="top bar">
    <div class="row gap">
      <a class="btn" href="{{ url_for('house_setup') }}">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á</a>
      <div>
        <div class="title">üß© ‡∏´‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</div>
        <div class="subtitle">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</div>
      </div>
    </div>
  </header>

  <main class="card">
    {% set rooms = rooms or {} %}

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mt">
        {% for cat,msg in messages %}
          <div class="toast {{cat}}">{{ msg }}</div>
        {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% if rooms|length == 0 %}
      <div class="mini">
        <div class="mini-title">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á</div>
        <div class="muted">‡πÑ‡∏õ‡∏ó‡∏µ‡πà ‚Äú‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡πâ‡∏≤‡∏ô‚Äù ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div>
        <div class="row gap mt">
          <a class="btn primary" href="{{ url_for('house_setup') }}">‡πÑ‡∏õ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡πâ‡∏≤‡∏ô</a>
        </div>
      </div>
    {% else %}

      <div class="mini">
        <div class="mini-title">‡∏™‡∏£‡∏∏‡∏õ</div>
        <div class="muted">
          ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î <b>{{ rooms|length }}</b> ‡∏´‡πâ‡∏≠‡∏á ‚Ä¢ ‡∏Ñ‡∏•‡∏¥‡∏Å ‚Äú‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏£‡πå/‡πÑ‡∏ü/‡∏ó‡∏µ‡∏ß‡∏µ ‡∏Ø‡∏•‡∏Ø ‡∏£‡∏≤‡∏¢‡∏´‡πâ‡∏≠‡∏á
        </div>
      </div>

      <div class="grid2 mt">
        {% for rid, r in rooms.items() %}
          {% set aps = (r.appliances or {}) %}
          <div class="mini">
            <div class="row between" style="align-items:flex-start;">
              <div>
                <div class="mini-title">üè∑Ô∏è {{ r.label if r.label else rid }}</div>
                <div class="muted small">‡∏£‡∏´‡∏±‡∏™‡∏´‡πâ‡∏≠‡∏á: <b>{{ rid }}</b></div>
                <div class="muted">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: <b>{{ r.type }}</b></div>
              </div>
              <div class="row gap">
                <a class="btn primary" href="{{ url_for('room_detail', rid=rid) }}">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</a>
              </div>
            </div>

            <div class="divider"></div>

            <div class="muted small">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á (‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô)</div>
            {% if aps|length == 0 %}
              <div class="muted">‚Äî</div>
            {% else %}
              <div class="mt small">
                <span class="muted">{{ (aps.keys()|list)|join(", ") }}</span>
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </div>

      <div class="divider"></div>

      <div class="mini">
        <div class="mini-title">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ</div>
        <div class="muted">
          1) ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á ‚Üí 2) ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ Home ‚Üí 3) ‡∏Å‡∏î ‚Äú‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å 1 ‡∏ß‡∏±‡∏ô‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü
        </div>
      </div>

    {% endif %}
  </main>
</div>
</body>
</html>
