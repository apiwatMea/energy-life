<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à ‚Ä¢ ENERGY LIFE</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"/>
</head>
<body class="bg">
<div class="shell">

  <header class="top bar">
    <div class="row gap">
      <a class="btn" href="{{ url_for('home') }}">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a>
      <div>
        <div class="title">üéØ ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</div>
        <div class="subtitle">‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Å‡∏° (Game Mode)</div>
      </div>
    </div>
  </header>

  <main class="card">

    {% if app_mode == 'utility' %}
      <!-- ===== Utility Mode : ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏Å‡∏° ===== -->
      <div class="center mt2">
        <div class="big">üöß ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏õ‡∏¥‡∏î‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß</div>
        <p class="muted mt">
          ‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô <b>‡πÇ‡∏´‡∏°‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á (Utility Mode)</b><br/>
          ‡πÄ‡∏°‡∏ô‡∏π‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡∏° ‡∏à‡∏∂‡∏á‡∏ñ‡∏π‡∏Å‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ
        </p>

        <div class="mt2">
          <a class="btn primary" href="{{ url_for('home') }}">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a>
        </div>

        <div class="divider"></div>
        <div class="muted small">
          * ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î Game Mode ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Admin
        </div>
      </div>

    {% else %}
      <!-- ===== Game Mode : ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏° (‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï) ===== -->

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="mt">
          {% for cat,msg in messages %}
            <div class="toast {{cat}}">{{ msg }}</div>
          {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <div class="grid2 mt">
        {% for m in missions %}
        <div class="mini">
          <div class="row between">
            <div>
              <div class="mini-title">{{ m.title }}</div>
              <div class="muted">{{ m.type|upper }}</div>
            </div>
            <div class="badge">
              {{ "‚úÖ" if m.claimed else ("üü¢" if m.available else "üîí") }}
            </div>
          </div>

          <div class="mt">{{ m.desc }}</div>

          <div class="row between mt">
            <div class="muted">
              ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•: <b>{{ m.reward_points }}</b> ‚≠ê
              {% if m.reward_item %}
                + {{ m.reward_item.qty }}x {{ m.reward_item.key }}
              {% endif %}
            </div>

            <form method="post">
              <input type="hidden" name="mission_id" value="{{ m.id }}"/>
              {% if m.claimed %}
                <button class="btn" disabled>‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß</button>
              {% elif m.available %}
                <button class="btn primary" type="submit">‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</button>
              {% else %}
                <button class="btn" disabled>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô</button>
              {% endif %}
            </form>
          </div>
        </div>
        {% endfor %}
      </div>

      <div class="mt muted">
        ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö: ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ö‡∏≤‡∏á‡∏≠‡∏±‡∏ô‡∏à‡∏∞‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å ‚Äú‡πÑ‡∏Ç‡πà‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‚Äù ‡πÅ‡∏•‡∏∞ ‚Äú‡∏ï‡∏±‡πã‡∏ß‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‚Äù
      </div>

    {% endif %}
  </main>

</div>
</body>
</html>
